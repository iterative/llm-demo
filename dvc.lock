schema: '2.0'
stages:
  expand:
    cmd: bash expand_data.sh
    deps:
    - path: docs_dump.zip
      hash: md5
      md5: 2dfe0f1dbd30ef26e75cbaa56e6e9fec
      size: 470834
    - path: expand_data.sh
      hash: md5
      md5: b032a7e69b749b5f58101e7c3cc5c5bb
      size: 57
    outs:
    - path: data
      hash: md5
      md5: 02f0ab84c9c69a0277cc4509ae040c4a.dir
      size: 1093454
      nfiles: 241
  ingest:
    cmd: python ingest.py
    deps:
    - path: data
      hash: md5
      md5: 02f0ab84c9c69a0277cc4509ae040c4a.dir
      size: 1093454
      nfiles: 241
    - path: ingest.py
      hash: md5
      md5: 708398f2c31d37c7052a384a7923d96f
      size: 1250
    params:
      params.yaml:
        TextSplitter:
          chunk_size: 1500
          chunk_overlap: 200
          keep_separator: false
          add_start_index: false
    outs:
    - path: docs.json
      hash: md5
      md5: fde59b090e0373aaafe406ddabea697a
      size: 1229954
    - path: metadatas.json
      hash: md5
      md5: e2c43695a1a41b0c4506ed2b9f99fe53
      size: 62017
  vectorize:
    cmd: python vector_store.py
    deps:
    - path: docs.json
      hash: md5
      md5: fde59b090e0373aaafe406ddabea697a
      size: 1229954
    - path: metadatas.json
      hash: md5
      md5: e2c43695a1a41b0c4506ed2b9f99fe53
      size: 62017
    - path: vector_store.py
      hash: md5
      md5: 73df04619c4785d816ac11db2fef04b7
      size: 912
    params:
      params.yaml:
        OpenAIEmbeddings:
          chunk_size: 1000
          embedding_ctx_length: 8191
          max_retries: 6
          model: text-embedding-ada-002
    outs:
    - path: docs.index
      hash: md5
      md5: 38f969a3d7014a21553ef21f769b34a4
      size: 5425197
    - path: faiss_store.pkl
      hash: md5
      md5: 23bd969ea3e86552a8762cd95c485099
      size: 1315415
  run:
    cmd: python qa.py
    deps:
    - path: docs.index
      hash: md5
      md5: 38f969a3d7014a21553ef21f769b34a4
      size: 5425197
    - path: faiss_store.pkl
      hash: md5
      md5: 23bd969ea3e86552a8762cd95c485099
      size: 1315415
    - path: qa.py
      hash: md5
      md5: b4d48ec551952f9387b60c8b5409c779
      size: 1610
    - path: samples.txt
      hash: md5
      md5: 2a7db14e656fea3316ef7f8de2ecac54
      size: 1031
    params:
      params.yaml:
        ChatOpenAI:
          max_retries: 6
          model_name: gpt-3.5-turbo
          temperature: 0.0
          verbose: true
        Retrieval:
          max_tokens_limit: 3375
          reduce_k_below_max_tokens: false
          verbose: true
    outs:
    - path: results.csv
      hash: md5
      md5: f46c0148a4fc9a85013b9ee85819f3b8
      size: 4993
